(this["webpackJsonpreact-snake"]=this["webpackJsonpreact-snake"]||[]).push([[0],[,,,function(e,t,i){e.exports=i.p+"static/media/bulldozer.1c21b351.jpg"},,,,,,,function(e,t,i){e.exports=i.p+"static/media/snake.aa6a8a77.png"},function(e,t,i){e.exports=i.p+"static/media/rock.33d58dc3.jfif"},,,,function(e,t,i){e.exports=i(22)},,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),a=i(9),s=i.n(a),r=(i(20),i(2));i(21);function c(){var e=["Yep, that's pizza","Don't eat the rocks","Additional pizza required","You do not have enough pizza"];return e[Math.floor(Math.random()*e.length)]}var d=o.a.memo((function(e){var t=e.board,i=e.timer;return t.crownActive?o.a.createElement("h1",{className:"power-mode"},"Quick!!! Eat all the rocks!!! ",i,"s"):null})),u=o.a.memo((function(e){var t=e.message;return o.a.createElement("h1",{className:"message"},t)})),l=i(3),h=i.n(l);var v,f=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{className:"img-1",alt:"",src:h.a}),o.a.createElement("img",{className:"img-2",alt:"",src:h.a}),o.a.createElement("img",{className:"img-3",alt:"",src:h.a}),o.a.createElement("img",{className:"img-4",alt:"",src:h.a}),e.children)},m=i(1),g=i(6),b=i(10),k=i.n(b),E=i(11),w=i.n(E);!function(e){e[e.N=0]="N",e[e.S=1]="S",e[e.E=2]="E",e[e.W=3]="W"}(v||(v={}));var y=function(e){var t,i=e.x,n=e.y,a=e.width,s=e.count,r=e.isFood,c=e.isSnakeHead,d=e.isSnakeBody,u=e.direction,l=e.isBadFood,f=e.isCrown,m=e.kingMode,b=[];n===s-1&&b.push("top"),0===n&&b.push("bottom"),0===i&&b.push("left"),i===s-1&&b.push("right"),r&&b.push("food"),d&&b.push("snakebody"),c&&b.push("snakehead");var E=(t={},Object(g.a)(t,v.N,"rotate(0deg)"),Object(g.a)(t,v.E,"rotate(90deg)"),Object(g.a)(t,v.S,"rotate(180deg)"),Object(g.a)(t,v.W,"rotate(270deg)"),t);return o.a.createElement("div",{className:b.join(" ")+" grid-cell",style:{width:a,height:a}},(c||d)&&o.a.createElement("img",{alt:"snakehead",src:m?h.a:k.a,style:{width:"100%",transform:E[u]}}),r&&"\ud83c\udf55",f&&"\ud83d\udc51",l&&o.a.createElement("img",{alt:"snakehead",src:w.a,style:{width:"100%",height:"100%"}}))};var _=o.a.memo((function(e){var t=Object.assign({},Object(m.a)({},e),{isFood:!1,isSnakeBody:!1,isSnakeHead:!1});return o.a.createElement(y,t)})),O={isFood:!1,isSnakeHead:!1,isSnakeBody:!1,isBadFood:!1,isCrown:!1};var j=o.a.memo((function(e){var t=Object.assign({},Object(m.a)({},e),Object(m.a)({},O),{isBadFood:!0});return o.a.createElement(y,t)}));var P=function(e){var t=Object.assign({},Object(m.a)({},e),{isSnakeBody:!0});return o.a.createElement(y,t)};var p=o.a.memo((function(e){var t=Object.assign({},Object(m.a)({},e),Object(m.a)({},O),{isCrown:!0});return o.a.createElement(y,t)}));var F=o.a.memo((function(e){var t=Object.assign({},Object(m.a)({},e),Object(m.a)({},O),{isFood:!0});return o.a.createElement(y,t)}));var S=function(e){var t=Object.assign({},Object(m.a)({},e),{isSnakeHead:!0});return o.a.createElement(y,t)};var N=function(e){var t=e.count,i=e.headPosition,n=e.foodPosition,a=e.crownPosition,s=e.tailPositions,r=e.badFoodPositions,c=e.kingMode;function d(e,d){var u={key:e.toString()+"-"+d.toString(),width:500/t,count:t,x:e,y:d,kingMode:c};if(null===i||void 0===i?void 0:i.isEqual(e,d)){var l=Object.assign({},u,{direction:null===i||void 0===i?void 0:i.direction});return o.a.createElement(S,l)}if(null===n||void 0===n?void 0:n.isEqual(e,d))return o.a.createElement(F,u);if(null===a||void 0===a?void 0:a.isEqual(e,d))return o.a.createElement(p,u);if(s.some((function(t){return t.isEqual(e,d)}))){var h=s.find((function(t){return t.isEqual(e,d)})),v=Object.assign({},u,{direction:null===h||void 0===h?void 0:h.direction});return o.a.createElement(P,v)}return r.some((function(t){return t.isEqual(e,d)}))?o.a.createElement(j,u):o.a.createElement(_,u)}for(var u=[],l=t-1;l>-1;l--)for(var h=0;h<t;h++)u.push(d(h,l));return o.a.createElement(o.a.Fragment,null,u)};function B(e){var t=e.foodEaten,i=e.badFoodEaten,n=e.score;return o.a.createElement("div",{className:"score-container"},o.a.createElement("div",{className:"score"},n),o.a.createElement("div",{className:"score"},o.a.createElement("span",null,t),o.a.createElement("span",{"aria-label":"counter",role:"img"},"\ud83c\udf55")),o.a.createElement("div",{className:"score"},o.a.createElement("span",null,i),o.a.createElement("img",{alt:"bulldozer-logo",src:h.a})))}function x(e){var t=e.board,i=e.onRestart,a=t.boardSize,s=Object(n.useState)(),l=Object(r.a)(s,2),h=l[0],v=l[1],m=Object(n.useState)([]),g=Object(r.a)(m,2),b=g[0],k=g[1],E=Object(n.useState)(),w=Object(r.a)(E,2),y=w[0],_=w[1],O=Object(n.useState)(),j=Object(r.a)(O,2),P=j[0],p=j[1],F=Object(n.useState)([]),S=Object(r.a)(F,2),x=S[0],A=S[1],H=Object(n.useState)(),z=Object(r.a)(H,2),C=z[0],q=z[1],M=Object(n.useState)(15),W=Object(r.a)(M,2),R=W[0],I=W[1],L=Object(n.useState)(),D=Object(r.a)(L,2),T=D[0],U=D[1];return Object(n.useEffect)((function(){var e=t.snake;v(e.getHeadPosition()),k(e.getBodyPositions()),_(t.getFood()),A([]),p(void 0),U(void 0),q(void 0)}),[t]),Object(n.useEffect)((function(){function e(e){U(e)}var i=t.snake,n=0,o=!0,a=setInterval((function(){if(1===++n&&e("Collect \ud83c\udf55 to make the \ud83d\udc0d longer"),30===n&&(e("Collect \ud83d\udc51 to king the \ud83d\udc0d."),p(t.getNewCrown())),!t.getGameoverMessage()){i.tick();var a=i.getHeadPosition(),s=t.getFood();v(a),k(i.getBodyPositions()),q(t.getGameoverMessage()),t.hasHitBadFood()&&t.crownActive&&(e(c()),p(void 0),t.eatBadFood(a),A(t.getBadFoods())),s.isPositionEqual(a)&&(i.increaseLength(),o?(o=!1,e("Don't eat the rocks!")):e(c()),_(t.getNewFood()),A(t.getNewBadFood()));var r=t.getCrown();(null===r||void 0===r?void 0:r.isPositionEqual(a))&&function(){p(void 0),t.setCrownActive();var e=15,i=setInterval((function(){e--,I(e)}),1e3);setTimeout((function(){t.crownActive=!1,I(15),clearInterval(i),p(t.getNewCrown())}),15e3)}()}}),t.interval);return function(){return clearInterval(a)}}),[t]),Object(n.useEffect)((function(){var e=t.snake,i=function(t){e.onKeyPress(t.key)};return document.addEventListener("keydown",i),function(){return document.removeEventListener("keydown",i)}}),[t]),C?o.a.createElement("h1",{onClick:i,className:"restart"},C," Click to restart!"):o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"grid-container"},o.a.createElement("div",{className:"".concat(t.crownActive?"king":""," grid")},o.a.createElement(f,null,o.a.createElement(N,{count:a,badFoodPositions:x,crownPosition:P,foodPosition:y,headPosition:h,tailPositions:b,kingMode:t.crownActive}))),o.a.createElement(d,{board:t,timer:R}),o.a.createElement(u,{message:T})),o.a.createElement(B,{score:t.getScore(),foodEaten:t.snake._foodEaten,badFoodEaten:t.snake._badFoodEaten}))}var A=i(7),H=i(4),z=i(5),C=i(13),q=i(12),M=i(14),W=function(){function e(t,i){Object(H.a)(this,e),this.x=t,this.y=i}return Object(z.a)(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"isEqual",value:function(e,t){return this.x===e&&this.y===t}},{key:"isPositionEqual",value:function(e){return this.y===e.y&&this.x===e.x}}]),e}(),R=function(e){function t(e,i,n){var o;return Object(H.a)(this,t),(o=Object(C.a)(this,Object(q.a)(t).call(this,e,i))).direction=n,o}return Object(M.a)(t,e),Object(z.a)(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.direction)}}]),t}(W),I=function(){function e(t,i){Object(H.a)(this,e),this._size=void 0,this._bodyPositions=[],this._headPosition=void 0,this._direction=v.E,this._newdirection=v.E,this._moveTail=!0,this._foodEaten=0,this._badFoodEaten=0,this.stack=[],this._size=t;var n=Math.ceil(i/2);this._headPosition=new R(t,n,this._direction),this.stack.push(this._direction);for(var o=0;o<t;o++)this._bodyPositions.push(new R(o,n,this._direction)),this.stack.push(this._direction)}return Object(z.a)(e,[{key:"getHeadPosition",value:function(){return this._headPosition}},{key:"getNextHeadPositions",value:function(){var e=this._headPosition.clone(),t=this._headPosition.clone(),i=this._headPosition.clone(),n=this._headPosition.clone();return e.x+=1,t.x-=1,i.y+=1,n.x+=1,[e,t,i,n]}},{key:"getBodyPositions",value:function(){return this._bodyPositions}},{key:"getDirection",value:function(){return this._direction}},{key:"move",value:function(e){this._newdirection=e}},{key:"tick",value:function(){this._direction=this._newdirection;var e=this._moveTail?1:0,t=this._bodyPositions.slice(e);switch(this._bodyPositions=[].concat(Object(A.a)(t),[this._headPosition.clone()]),this.updateDirections(),this._direction){case v.E:this._headPosition.x+=1;break;case v.W:this._headPosition.x-=1;break;case v.N:this._headPosition.y+=1;break;case v.S:this._headPosition.y-=1}this._moveTail=!0}},{key:"onKeyPress",value:function(e){switch(e){case"ArrowDown":this._direction!==v.N&&(this._newdirection=v.S);break;case"ArrowUp":this._direction!==v.S&&(this._newdirection=v.N);break;case"ArrowLeft":this._direction!==v.E&&(this._newdirection=v.W);break;case"ArrowRight":this._direction!==v.W&&(this._newdirection=v.E)}}},{key:"increaseLength",value:function(){this._foodEaten++,this._moveTail=!1}},{key:"eatBadFood",value:function(){this._badFoodEaten++}},{key:"updateDirections",value:function(){this._headPosition.direction=this._direction,this.stack.unshift(this._direction),this.stack=this.stack.slice(0,this._size+this._foodEaten);for(var e=this._bodyPositions.slice().reverse(),t=0;t<e.length;t++)e[t].direction=this.stack[t]}}]),e}();function L(){return Number.parseInt(localStorage.getItem("hiscore")||"0")}var D=function(){function e(t,i,n){Object(H.a)(this,e),this.snakeSize=t,this.boardSize=i,this.interval=n,this._food=void 0,this._crown=void 0,this._badFoods=[],this.snake=void 0,this.counter=0,this.crownActive=!1,this.snake=new I(t,i),this._food=this.getNewFood()}return Object(z.a)(e,[{key:"getGameoverMessage",value:function(){var e;if(this.isOutOfBounds()||this.hasHitSelf()||this.hasHitBadFood()&&!this.crownActive){if((e=this.getScore())>L()&&localStorage.setItem("hiscore",e.toString()),L(),this.hasHitBadFood()&&!this.crownActive)return"Don't eat the Rocks!!";if(this.isOutOfBounds())return"You're out of bounds!";if(this.hasHitSelf())return"You hit yourself!"}}},{key:"hasHitBadFood",value:function(){var e=this.snake.getHeadPosition();return this._badFoods.some((function(t){return t.isPositionEqual(e)}))}},{key:"getFood",value:function(){return this._food}},{key:"getInterval",value:function(){return this.interval}},{key:"getNewFood",value:function(){return this._food=this.getFoodPosition(),this.getFood()}},{key:"getBadFoods",value:function(){return this._badFoods}},{key:"getNewBadFood",value:function(){this.counter++;for(var e=0;e<this.counter;e++){var t=this.getFoodPosition();this._badFoods.push(t)}return this.getBadFoods()}},{key:"eatBadFood",value:function(e){this.snake.eatBadFood(),this._badFoods=this._badFoods.filter((function(t){return!t.isPositionEqual(e)}))}},{key:"getCrown",value:function(){return this._crown}},{key:"setCrownActive",value:function(){this.crownActive=!0}},{key:"getNewCrown",value:function(){var e=this.getFoodPosition();return this._crown=e,this.getCrown()}},{key:"getFoodPosition",value:function(){var e=[this.snake.getHeadPosition(),this._food,this._crown].concat(Object(A.a)(this.snake.getNextHeadPositions()),Object(A.a)(this._badFoods),Object(A.a)(this.snake.getBodyPositions()));return this.getFoodPositionRecurse(e)}},{key:"getScore",value:function(){return 20*this.snake._badFoodEaten+10*this.snake._foodEaten}},{key:"getFoodPositionRecurse",value:function(e){var t=Math.floor(Math.random()*this.boardSize),i=Math.floor(Math.random()*this.boardSize),n=new W(t,i);return e.some((function(e){return e&&e.isPositionEqual(n)}))?this.getFoodPositionRecurse(e):n}},{key:"isOutOfBounds",value:function(){var e=this.snake.getHeadPosition();return e.x>=this.boardSize||e.x<=-1||e.y>=this.boardSize||e.y<=-1}},{key:"hasHitSelf",value:function(){var e=this.snake.getBodyPositions(),t=this.snake.getHeadPosition();return e.some((function(e){return e.isPositionEqual(t)}))}}]),e}();var T=function(){var e=Object(n.useState)(new D(3,12,400)),t=Object(r.a)(e,2),i=t[0],a=t[1];return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",null,"react-snake"),o.a.createElement("h1",{style:{marginLeft:"30px"}},"Hiscore: ",L())),o.a.createElement(x,{board:i,onRestart:function(){return a(new D(3,12,400))}}))},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var i=e.installing;null!=i&&(i.onstatechange=function(){"installed"===i.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(o.a.createElement(T,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(i){var n=i.headers.get("content-type");404===i.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Y(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Y(t,e)}))}}()}],[[15,1,2]]]);
//# sourceMappingURL=main.11c7f6bc.chunk.js.map